<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />
  <title>üéâ –° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –ê—Ä–∫–∞–¥–∏–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á! üéÇ</title>

  <!-- Premium Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&family=Manrope:wght@400;600;800&family=Comfortaa:wght@700&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root {
      --gold: #FFD700;
      --gold-light: #FFF59D;
      --gold-dark: #F57C00;
      --purple: #9C27B0;
      --purple-light: #E1BEE7;
      --pink: #FF1744;
      --pink-light: #FF80AB;
      --blue: #2196F3;
      --blue-light: #64B5F6;
      --cyan: #00BCD4;
      --green: #00E676;
      --bg-dark: #0a0e27;
      --bg-mid: #1a1f3a;
      --text-primary: #FFFFFF;
      --text-secondary: #E0E0E0;
      --glass: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      overflow: hidden;
    }

    body {
      font-family: 'Manrope', system-ui, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #ffc107 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      min-height: 100vh;
      color: var(--text-primary);
      position: relative;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Animated Background Layers */
    .bg-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3), transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3), transparent 50%),
                  radial-gradient(circle at 40% 40%, rgba(255, 255, 119, 0.2), transparent 50%);
      animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(30px, -30px) rotate(120deg); }
      66% { transform: translate(-20px, 20px) rotate(240deg); }
    }

    /* Floating Balloons */
    .balloons {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2;
    }

    .balloon {
      position: absolute;
      width: 80px;
      height: 100px;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      opacity: 0.9;
      animation: floatUp 15s infinite;
      box-shadow: inset -10px -10px 20px rgba(0,0,0,0.2), 0 10px 30px rgba(0,0,0,0.3);
    }

    .balloon::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 100px;
      background: rgba(0,0,0,0.2);
      left: 50%;
      top: 100%;
      transform: translateX(-50%);
    }

    .balloon:nth-child(1) {
      background: linear-gradient(135deg, #FF6B6B, #FF8E53);
      left: 5%;
      animation-duration: 19s;
      animation-delay: 0s;
    }

    .balloon:nth-child(2) {
      background: linear-gradient(135deg, #4ECDC4, #44A08D);
      left: 25%;
      animation-duration: 21s;
      animation-delay: 2s;
    }

    .balloon:nth-child(3) {
      background: linear-gradient(135deg, #F7DC6F, #F39C12);
      left: 45%;
      animation-duration: 17s;
      animation-delay: 4s;
    }

    .balloon:nth-child(4) {
      background: linear-gradient(135deg, #BB8FCE, #8E44AD);
      left: 65%;
      animation-duration: 23s;
      animation-delay: 1s;
    }

    .balloon:nth-child(5) {
      background: linear-gradient(135deg, #85C1E2, #3498DB);
      left: 85%;
      animation-duration: 20s;
      animation-delay: 3s;
    }

    @keyframes floatUp {
      0% {
        bottom: -150px;
        transform: translateX(0) rotate(-5deg);
      }
      25% {
        transform: translateX(-30px) rotate(5deg);
      }
      50% {
        transform: translateX(30px) rotate(-5deg);
      }
      75% {
        transform: translateX(-15px) rotate(5deg);
      }
      100% {
        bottom: calc(100% + 150px);
        transform: translateX(0) rotate(-5deg);
      }
    }

    /* Sparkles */
    .sparkles {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 3;
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      border-radius: 50%;
      animation: sparkle 3s linear infinite;
    }

    @keyframes sparkle {
      0%, 100% {
        opacity: 0;
        transform: scale(0);
      }
      50% {
        opacity: 1;
        transform: scale(1);
      }
    }

    /* Confetti & Fireworks Canvases */
    canvas#confetti, canvas#fireworks {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    #confetti { z-index: 4; }
    #fireworks { z-index: 5; }

    /* Main Container */
    .container {
      position: relative;
      z-index: 10;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      perspective: 1500px;
    }

    /* 3D Card */
    .card {
      width: min(900px, 95vw);
      background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
      border-radius: 30px;
      padding: 40px;
      backdrop-filter: blur(20px);
      box-shadow: 
        0 25px 60px rgba(0,0,0,0.4),
        0 0 100px rgba(255,215,0,0.3),
        inset 0 0 0 1px rgba(255,255,255,0.2);
      transform-style: preserve-3d;
      transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: '';
      position: absolute;
      inset: -3px;
      border-radius: 30px;
      padding: 3px;
      background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #F7DC6F, #BB8FCE, #85C1E2, #FF6B6B);
      background-size: 300% 300%;
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      animation: borderAnimation 3s linear infinite;
    }

    @keyframes borderAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Header */
    .header {
      text-align: center;
      margin-bottom: 30px;
      animation: slideDown 0.8s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 24px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      border-radius: 50px;
      font-weight: 800;
      font-size: 14px;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: var(--bg-dark);
      box-shadow: 0 5px 20px rgba(255,215,0,0.4);
      animation: pulse 2s ease-in-out infinite;
      margin-bottom: 20px;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    /* Animated Title */
    h1 {
      font-family: 'Montserrat', sans-serif;
      font-weight: 900;
      font-size: clamp(32px, 7vw, 64px);
      line-height: 1.1;
      margin: 20px 0;
      background: linear-gradient(45deg, #FFD700, #FFA500, #FF6347, #FF1493, #00CED1, #FFD700);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      animation: titleGradient 3s ease-in-out infinite;
      text-shadow: 0 10px 30px rgba(0,0,0,0.3);
      position: relative;
      min-height: 2em;
    }

    @keyframes titleGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .title-emoji {
      display: inline-block;
      animation: bounce 1s ease-in-out infinite;
      font-size: 0.9em;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .subtitle {
      font-size: clamp(16px, 3.5vw, 20px);
      color: var(--gold-light);
      font-weight: 600;
      margin: 10px 0 30px;
      opacity: 0;
      animation: fadeInUp 0.8s ease-out 0.3s forwards;
      min-height: 1.5em;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
      from {
        opacity: 0;
        transform: translateY(20px);
      }
    }

    /* Message Cards */
    .messages {
      display: grid;
      gap: 20px;
      margin: 30px 0;
    }

    .message-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border-radius: 20px;
      padding: 20px;
      border: 1px solid rgba(255,255,255,0.2);
      position: relative;
      overflow: hidden;
      opacity: 0;
      animation: slideIn 0.6s ease-out forwards;
      min-height: 60px;
    }

    .message-card:nth-child(1) { animation-delay: 0.5s; }
    .message-card:nth-child(2) { animation-delay: 0.7s; }
    .message-card:nth-child(3) { animation-delay: 0.9s; }
    .message-card:nth-child(4) { animation-delay: 1.1s; }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-50px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .message-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: rotate(45deg);
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .message-text {
      font-size: clamp(15px, 3.5vw, 18px);
      line-height: 1.6;
      color: var(--text-secondary);
      position: relative;
      z-index: 1;
    }

    .highlight {
      color: var(--gold-light);
      font-weight: 700;
      text-shadow: 0 0 20px rgba(255,215,0,0.5);
    }

    /* Cursor Animation */
    .cursor::after {
      content: '|';
      display: inline-block;
      color: var(--gold);
      animation: blink 0.8s steps(1) infinite;
      font-weight: 300;
      margin-left: 2px;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    /* Footer */
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid rgba(255,215,0,0.3);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
      opacity: 0;
      animation: fadeIn 1s ease-out 1.5s forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .team {
      font-weight: 800;
      font-size: 16px;
      color: var(--gold);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .date {
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* Special Effects Button */
    .celebrate-btn {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      color: var(--bg-dark);
      border: none;
      padding: 15px 30px;
      border-radius: 50px;
      font-weight: 800;
      font-size: 16px;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(255,215,0,0.4);
      transition: all 0.3s ease;
      z-index: 100;
      animation: bounceBtn 2s ease-in-out infinite;
    }

    @keyframes bounceBtn {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-5px) scale(1.05); }
    }

    .celebrate-btn:hover {
      transform: translateY(-2px) scale(1.1);
      box-shadow: 0 15px 40px rgba(255,215,0,0.6);
    }

    /* Mobile Optimizations */
    @media (max-width: 640px) {
      .card {
        padding: 25px;
        border-radius: 25px;
      }
      
      .badge {
        font-size: 12px;
        padding: 10px 20px;
      }
      
      h1 {
        font-size: clamp(28px, 8vw, 48px);
      }
      
      .message-card {
        padding: 15px;
      }
      
      .celebrate-btn {
        bottom: 20px;
        right: 20px;
        padding: 12px 24px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="bg-overlay"></div>
  
  <!-- Floating Balloons -->
  <div class="balloons">
    <div class="balloon"></div>
    <div class="balloon"></div>
    <div class="balloon"></div>
    <div class="balloon"></div>
    <div class="balloon"></div>
  </div>

  <!-- Sparkles -->
  <div class="sparkles" id="sparkles"></div>

  <!-- Confetti & Fireworks -->
  <canvas id="confetti"></canvas>
  <canvas id="fireworks"></canvas>

  <div class="container" id="container">
    <div class="card" id="card">
      <div class="header">
        <div class="badge">
          ‚≠ê –ö–û–õ–õ–ï–ö–¢–ò–í –î–†–ù–£ ‚≠ê
        </div>
        
        <h1 id="title" class="cursor">
          <span class="title-emoji">üéâ</span>
        </h1>
        
        <p id="subtitle" class="subtitle cursor"></p>
      </div>

      <div class="messages">
        <div class="message-card">
          <p id="msg1" class="message-text cursor"></p>
        </div>
        <div class="message-card">
          <p id="msg2" class="message-text cursor"></p>
        </div>
        <div class="message-card">
          <p id="msg3" class="message-text cursor"></p>
        </div>
        <div class="message-card">
          <p id="msg4" class="message-text cursor"></p>
        </div>
      </div>

      <div class="footer">
        <div class="team">
          <span>üíñ</span>
          <span>–° —É–≤–∞–∂–µ–Ω–∏–µ–º, –∫–æ–º–∞–Ω–¥–∞ –î–†–ù–£</span>
        </div>
        <div class="date" id="date"></div>
      </div>
    </div>
  </div>

  <button class="celebrate-btn" onclick="megaCelebration()">
    üéä –ú–ï–ì–ê –ü–†–ê–ó–î–ù–ò–ö!
  </button>

  <script>
    // Generate Sparkles
    (function() {
      const sparklesContainer = document.getElementById('sparkles');
      for (let i = 0; i < 50; i++) {
        const sparkle = document.createElement('div');
        sparkle.className = 'sparkle';
        sparkle.style.left = Math.random() * 100 + '%';
        sparkle.style.top = Math.random() * 100 + '%';
        sparkle.style.animationDelay = Math.random() * 3 + 's';
        sparkle.style.animationDuration = (Math.random() * 2 + 2) + 's';
        sparklesContainer.appendChild(sparkle);
      }
    })();

    // Date
    document.getElementById('date').textContent = new Date().toLocaleDateString('ru-RU', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    });

    // 3D Card Effect
    const card = document.getElementById('card');
    const container = document.getElementById('container');
    
    container.addEventListener('mousemove', (e) => {
      const rect = card.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;
      
      const rotateX = (y - 0.5) * 10;
      const rotateY = (x - 0.5) * 10;
      
      card.style.transform = `rotateX(${-rotateX}deg) rotateY(${rotateY}deg)`;
    });
    
    container.addEventListener('mouseleave', () => {
      card.style.transform = 'rotateX(0) rotateY(0)';
    });

    // Typing Animation
    const sleep = ms => new Promise(r => setTimeout(r, ms));
    
    async function typeText(element, text, speed = 30) {
      element.textContent = '';
      for (let i = 0; i < text.length; i++) {
        element.textContent += text[i];
        await sleep(speed + Math.random() * 20);
      }
    }
    
    async function typeWithEmphasis(element, parts, speed = 30) {
      element.innerHTML = '';
      for (let part of parts) {
        if (part.highlight) {
          const span = document.createElement('span');
          span.className = 'highlight';
          element.appendChild(span);
          await typeText(span, part.text, speed);
        } else {
          const span = document.createElement('span');
          element.appendChild(span);
          await typeText(span, part.text, speed);
        }
      }
    }

    // Main Animation Sequence
    (async function() {
      const title = document.getElementById('title');
      const subtitle = document.getElementById('subtitle');
      const msg1 = document.getElementById('msg1');
      const msg2 = document.getElementById('msg2');
      const msg3 = document.getElementById('msg3');
      const msg4 = document.getElementById('msg4');

      // Title
      await sleep(500);
      await typeText(title, 'üéâ –° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è, –ê—Ä–∫–∞–¥–∏–π –ê–Ω–¥—Ä–µ–µ–≤–∏—á! üéÇ', 35);
      title.classList.remove('cursor');
      
      // Subtitle
      await sleep(200);
      subtitle.classList.add('cursor');
      await typeText(subtitle, '‚ú® –õ—É—á—à–∏–π —Ä–∞–±–æ—Ç–Ω–∏–∫ –∏ –Ω–∞–¥—ë–∂–Ω—ã–π –Ω–∞—á–∞–ª—å–Ω–∏–∫ –æ—Ç–¥–µ–ª–∞ ‚ú®', 25);
      subtitle.classList.remove('cursor');
      
      // Messages
      await sleep(300);
      await typeWithEmphasis(msg1, [
        {text: '–û—Ç –≤—Å–µ–≥–æ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–∞ –î–†–ù–£ ‚Äî '},
        {text: '—Å–∞–º—ã–µ —Ç—ë–ø–ª—ã–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è!', highlight: true},
        {text: ' üéä'}
      ], 25);
      msg1.classList.remove('cursor');
      
      await sleep(300);
      await typeWithEmphasis(msg2, [
        {text: '–¢—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ '},
        {text: '–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–µ–Ω –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–µ–Ω', highlight: true},
        {text: ', —á—Ç–æ –º—ã –∏–Ω–æ–≥–¥–∞ –∑–∞–±—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ '},
        {text: '–≥–æ–≤–æ—Ä–∏—Ç—å —Å–ø–∞—Å–∏–±–æ!', highlight: true},
        {text: ' üí´'}
      ], 25);
      msg2.classList.remove('cursor');
      
      await sleep(300);
      await typeWithEmphasis(msg3, [
        {text: '–ë–ª–∞–≥–æ–¥–∞—Ä—è —Ç–µ–±–µ –∑–∞–¥–∞—á–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è '},
        {text: '–ª–µ–≥—á–µ', highlight: true},
        {text: ', —Å—Ä–æ–∫–∏ ‚Äî '},
        {text: '—Ä–µ–∞–ª—å–Ω–µ–µ', highlight: true},
        {text: ', –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî '},
        {text: '–≤–ø–µ—á–∞—Ç–ª—è—é—â–∏–º!', highlight: true},
        {text: ' üöÄ'}
      ], 25);
      msg3.classList.remove('cursor');
      
      await sleep(300);
      await typeWithEmphasis(msg4, [
        {text: '–ñ–µ–ª–∞–µ–º '},
        {text: '–∫—Ä–µ–ø–∫–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è', highlight: true},
        {text: ', —Å–µ–º—å–µ ‚Äî '},
        {text: '–±–ª–∞–≥–æ–ø–æ–ª—É—á–∏—è', highlight: true},
        {text: ', –∞ —Ç–µ–±–µ ‚Äî '},
        {text: '—è—Ä–∫–∏—Ö –ø–æ–±–µ–¥', highlight: true},
        {text: ' –∏ —Ç–æ–ª—å–∫–æ '},
        {text: '–ª—É—á—à–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π', highlight: true},
        {text: ' –∫–∞–∂–¥—ã–π –¥–µ–Ω—å! üåü'}
      ], 25);
      msg4.classList.remove('cursor');
    })();

    // Enhanced Confetti
    (function() {
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      let W, H;
      
      function resize() {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);
      
      const particles = [];
      const particleCount = 150;
      const colors = ['#FFD700', '#FF69B4', '#00CED1', '#FF6347', '#98FB98', '#DDA0DD', '#F0E68C', '#87CEEB'];
      const shapes = ['circle', 'square', 'triangle', 'star'];
      
      class Confetti {
        constructor() {
          this.x = Math.random() * W;
          this.y = Math.random() * H - H;
          this.w = Math.random() * 12 + 5;
          this.h = Math.random() * 12 + 5;
          this.vx = Math.random() * 2 - 1;
          this.vy = Math.random() * 3 + 2;
          this.angle = Math.random() * 360;
          this.angleVel = Math.random() * 0.2 - 0.1;
          this.color = colors[Math.floor(Math.random() * colors.length)];
          this.shape = shapes[Math.floor(Math.random() * shapes.length)];
          this.opacity = 1;
        }
        
        update() {
          this.y += this.vy;
          this.x += this.vx;
          this.angle += this.angleVel;
          this.vy += 0.05;
          this.vx *= 0.99;
          
          if (this.y > H) {
            this.y = -20;
            this.x = Math.random() * W;
            this.vy = Math.random() * 3 + 2;
            this.vx = Math.random() * 2 - 1;
          }
        }
        
        draw() {
          ctx.save();
          ctx.translate(this.x, this.y);
          ctx.rotate(this.angle);
          ctx.globalAlpha = this.opacity;
          ctx.fillStyle = this.color;
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 2;
          
          switch(this.shape) {
            case 'circle':
              ctx.beginPath();
              ctx.arc(0, 0, this.w/2, 0, Math.PI * 2);
              ctx.fill();
              break;
            case 'square':
              ctx.fillRect(-this.w/2, -this.h/2, this.w, this.h);
              break;
            case 'triangle':
              ctx.beginPath();
              ctx.moveTo(0, -this.h/2);
              ctx.lineTo(-this.w/2, this.h/2);
              ctx.lineTo(this.w/2, this.h/2);
              ctx.closePath();
              ctx.fill();
              break;
            case 'star':
              ctx.beginPath();
              for(let i = 0; i < 5; i++) {
                const angle = (i * 72 - 90) * Math.PI / 180;
                const x = Math.cos(angle) * this.w/2;
                const y = Math.sin(angle) * this.h/2;
                if(i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
                const innerAngle = ((i * 72 + 36) - 90) * Math.PI / 180;
                const innerX = Math.cos(innerAngle) * this.w/4;
                const innerY = Math.sin(innerAngle) * this.h/4;
                ctx.lineTo(innerX, innerY);
              }
              ctx.closePath();
              ctx.fill();
              break;
          }
          
          ctx.restore();
        }
      }
      
      for (let i = 0; i < particleCount; i++) {
        particles.push(new Confetti());
      }
      
      function animate() {
        ctx.clearRect(0, 0, W, H);
        particles.forEach(p => {
          p.update();
          p.draw();
        });
        requestAnimationFrame(animate);
      }
      animate();
    })();

    // Enhanced Fireworks
    (function() {
      const canvas = document.getElementById('fireworks');
      const ctx = canvas.getContext('2d');
      let W, H;
      
      function resize() {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      }
      resize();
      window.addEventListener('resize', resize);
      
      const rockets = [];
      const particles = [];
      const colors = ['#FFD700', '#FF69B4', '#00CED1', '#FF6347', '#98FB98', '#DDA0DD'];
      
      class Rocket {
        constructor() {
          this.x = Math.random() * W;
          this.y = H;
          this.vx = Math.random() * 2 - 1;
          this.vy = Math.random() * -3 - 11;
          this.trail = [];
          this.exploded = false;
          this.color = colors[Math.floor(Math.random() * colors.length)];
        }
        
        update() {
          this.trail.push({ x: this.x, y: this.y });
          if (this.trail.length > 10) this.trail.shift();
          
          this.x += this.vx;
          this.y += this.vy;
          this.vy += 0.1;
          
          if (this.vy >= 0 && !this.exploded) {
            this.explode();
            this.exploded = true;
            return false;
          }
          return true;
        }
        
        explode() {
          const particleCount = 50 + Math.random() * 50;
          for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle(this.x, this.y, this.color));
          }
        }
        
        draw() {
          ctx.beginPath();
          ctx.moveTo(this.x, this.y);
          this.trail.forEach((p, i) => {
            ctx.lineTo(p.x, p.y);
          });
          ctx.strokeStyle = this.color;
          ctx.lineWidth = 2;
          ctx.stroke();
          
          ctx.beginPath();
          ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
      }
      
      class Particle {
        constructor(x, y, color) {
          this.x = x;
          this.y = y;
          const angle = Math.random() * Math.PI * 2;
          const velocity = Math.random() * 5 + 1;
          this.vx = Math.cos(angle) * velocity;
          this.vy = Math.sin(angle) * velocity;
          this.color = color;
          this.life = 100;
          this.size = Math.random() * 3 + 1;
        }
        
        update() {
          this.x += this.vx;
          this.y += this.vy;
          this.vy += 0.05;
          this.vx *= 0.98;
          this.vy *= 0.98;
          this.life--;
          this.size *= 0.98;
          return this.life > 0;
        }
        
        draw() {
          ctx.globalAlpha = this.life / 100;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
          ctx.globalAlpha = 1;
        }
      }
      
      function animate() {
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
        ctx.fillRect(0, 0, W, H);
        
        if (Math.random() < 0.05) {
          rockets.push(new Rocket());
        }
        
        for (let i = rockets.length - 1; i >= 0; i--) {
          if (!rockets[i].update()) {
            rockets.splice(i, 1);
          } else {
            rockets[i].draw();
          }
        }
        
        for (let i = particles.length - 1; i >= 0; i--) {
          if (!particles[i].update()) {
            particles.splice(i, 1);
          } else {
            particles[i].draw();
          }
        }
        
        requestAnimationFrame(animate);
      }
      animate();
    })();

    // Mega Celebration Function
    function megaCelebration() {
      // Create explosion of particles
      const colors = ['#FFD700', '#FF69B4', '#00CED1', '#FF6347', '#98FB98'];
      
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.style.position = 'fixed';
          particle.style.left = '50%';
          particle.style.top = '50%';
          particle.style.width = '10px';
          particle.style.height = '10px';
          particle.style.background = colors[Math.floor(Math.random() * colors.length)];
          particle.style.borderRadius = '50%';
          particle.style.pointerEvents = 'none';
          particle.style.zIndex = '1000';
          document.body.appendChild(particle);
          
          const angle = (i / 100) * Math.PI * 2;
          const velocity = 10 + Math.random() * 10;
          const vx = Math.cos(angle) * velocity;
          const vy = Math.sin(angle) * velocity;
          
          let x = 0, y = 0;
          const animate = () => {
            x += vx;
            y += vy;
            particle.style.transform = `translate(${x}px, ${y}px)`;
            particle.style.opacity = parseFloat(particle.style.opacity || 1) - 0.02;
            
            if (parseFloat(particle.style.opacity) > 0) {
              requestAnimationFrame(animate);
            } else {
              particle.remove();
            }
          };
          animate();
        }, i * 10);
      }
      
      // Flash effect
      const flash = document.createElement('div');
      flash.style.position = 'fixed';
      flash.style.inset = '0';
      flash.style.background = 'radial-gradient(circle, rgba(255,255,255,0.8), transparent)';
      flash.style.pointerEvents = 'none';
      flash.style.zIndex = '999';
      flash.style.animation = 'flash 0.5s ease-out';
      document.body.appendChild(flash);
      
      setTimeout(() => flash.remove(), 500);
      
      // Add temporary style for flash animation
      const style = document.createElement('style');
      style.textContent = `
        @keyframes flash {
          from { opacity: 1; }
          to { opacity: 0; }
        }
      `;
      document.head.appendChild(style);
    }
  </script>
</body>
</html>
